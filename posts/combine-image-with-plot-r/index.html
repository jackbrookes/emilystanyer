<!doctype html>
<html>
  <head>

    
    <meta property="og:image" content="/static/"/>
    <meta name="twitter:image" content="/static/" />
    



    <meta name="description" content="Make publication ready figures by putting images (such as diagrams) next to your ggplot2 graphs using cowplot. - Jack Brookes">

    <link rel="shortcut icon" href="/static/me_circ.png">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Merriweather:300,400,700,300i,400i,700i|Open+Sans:400,400i,700" rel="stylesheet">
    <link rel="stylesheet" href="/static/style.css">
    <link rel="stylesheet" href="/pygments.css">

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@jackbrookes" />
    <meta name="twitter:title" content="Place images next to plots in R (Cowplot)" />
    <meta name="twitter:description" content="Make publication ready figures by putting images (such as diagrams) next to your ggplot2 graphs using cowplot. - Jack Brookes" />



    <title>Place images next to plots in R (Cowplot) - Jack Brookes</title>

    
  
  </head>
  <body>
    <div id="centred-container">
      <ul id="navbar">
        <li class="navbutton"><a href="/" >Home</a></li>
        <li class="navbutton"><a href="/posts/" class="current">Posts</a></li>
        <li class="navbutton"><a href="/publications/" >Publications</a></li>
        <li class="navbutton"><a href="/about/" >About</a></li>
        <li class="navbutton"><a href="/contact/" >Contact</a></li>
        <li id="spacer">&nbsp;</li>
      </ul>
      <div id="content">
        
<h1 class="title">
  Place images next to plots in R (Cowplot)
</h1>

<p class="summary">
  Make publication ready figures by putting images (such as diagrams) next to your ggplot2 graphs using cowplot.
  
</p>

<p><img alt="Trial logger screenshot" src="/static/blog-images/example_r_figure.png" /></p>
<p>I couldn't find an easy way to do this but I thought it would be pretty helpful,
so here's a function that does it.</p>
<p>Source code:</p>
<div class="codehilite"><pre><span></span><span class="kn">library</span><span class="p">(</span>png<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>grid<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>tidyverse<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>cowplot<span class="p">)</span>

<span class="c1"># generate random data</span>
my.data <span class="o">&lt;-</span> <span class="kt">data.frame</span><span class="p">(</span>x <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">),</span> y <span class="o">=</span> rnorm<span class="p">(</span><span class="m">10</span><span class="p">))</span>

<span class="c1"># plot random data</span>
g <span class="o">&lt;-</span> ggplot<span class="p">(</span>my.data<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> x<span class="p">,</span> y <span class="o">=</span> y<span class="p">))</span> <span class="o">+</span>
  geom_line<span class="p">()</span>


<span class="c1"># define plot png function</span>
plot_png <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>fname<span class="p">,</span> interpolated <span class="o">=</span> <span class="kc">TRUE</span><span class="p">){</span>

  img <span class="o">&lt;-</span> readPNG<span class="p">(</span>fname<span class="p">)</span> <span class="o">%&gt;%</span>
    rasterGrob<span class="p">(</span>interpolate <span class="o">=</span> interpolated<span class="p">)</span><span class="c1"># enable/disable linear interpolation</span>
  ggplot<span class="p">()</span> <span class="o">+</span>
    annotation_custom<span class="p">(</span>img<span class="p">,</span>
                      xmin <span class="o">=</span> <span class="o">-</span><span class="kc">Inf</span><span class="p">,</span>
                      xmax <span class="o">=</span> <span class="kc">Inf</span><span class="p">,</span>
                      ymin <span class="o">=</span> <span class="o">-</span><span class="kc">Inf</span><span class="p">,</span>
                      ymax <span class="o">=</span> <span class="kc">Inf</span><span class="p">)</span>

<span class="p">}</span>

<span class="c1"># create our ggplot-compatible png</span>
img <span class="o">&lt;-</span> plot_png<span class="p">(</span><span class="s">&quot;eyediagram.png&quot;</span><span class="p">)</span>

<span class="c1"># plot images together in grid</span>
plot_grid<span class="p">(</span>g<span class="p">,</span> img<span class="p">,</span> labels <span class="o">=</span> <span class="kc">letters</span><span class="p">)</span>
</pre></div>


<div class="techbox cf">
  <h2 class="techused">Post tags:</h3>
  <ul class="tags">
    
      
        <li>
    <span class="tag">
      <i class="fa fa-code fa-fw"
      style="color:#2222ff"
      aria-hidden="true"></i>
      R
    </span>
</li>
      
    
  </ul>
</div>


      </div>

    </div>
    <div id="footer-container">
      <div id="footer">
        
        <ul class="footer-ul">
          <li style="color: #8AB3CF; margin-bottom: 5px;">Â© Jack Brookes 2017</li>
          <li><a href="/">Home</a></li>
          <li><a href="/posts/">Posts</a></li>
          <li><a href="/publications/">Publications</a></li>
          <li><a href="/about/">About</a></li>
          <li><a href="/contact/">Contact</a></li>
          <li><a onclick="topFunction()" style="cursor:pointer">Back to top <i class="fa fa-fw fa-chevron-up" aria-hidden="true"></i></a></li>
        </ul>
        
      </div>
    </div>

    <script>
    // When the user clicks on the button, scroll to the top of the document
    function topFunction() {
        document.body.scrollTop = 0;
        document.documentElement.scrollTop = 0;
    }
    </script>


  </body>
</html>