<!doctype html>
<html>
  <head>

    
    <meta property="og:image" content="/static/"/>
    <meta name="twitter:image" content="/static/" />
    



    <meta name="description" content="Inspired by openprocessing.org, I made a looping geometric animation in p5js.   - Jack Brookes">

    <link rel="shortcut icon" href="/static/me_circ.png">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300i,400i,700i|Roboto:400" rel="stylesheet">
    <link rel="stylesheet" href="/static/style.css">
    <link rel="stylesheet" href="/pygments.css">

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@jackbrookes" />
    <meta name="twitter:title" content="Geometric ripples in p5js" />
    <meta name="twitter:description" content="Inspired by openprocessing.org, I made a looping geometric animation in p5js.   - Jack Brookes" />



    <title>Geometric ripples in p5js - Jack Brookes</title>

    
  
  </head>
  <body>
    <div id="centred-container">
      <ul id="navbar">
        <li class="navbutton"><a href="/" >Home</a></li>
        <li class="navbutton"><a href="/posts/" class="current">Posts</a></li>
        <li class="navbutton"><a href="/about/" >About</a></li>
        <li class="navbutton"><a href="/contact/" >Contact</a></li>
        <li id="spacer">&nbsp;</li>
      </ul>
      <div id="content">
        
<h1 class="title">
  Geometric ripples in p5js
</h1>

<p class="summary">
  Inspired by openprocessing.org, I made a looping geometric animation in p5js.  
  
</p>

<div id='p5-container'></div>

<script language="javascript" type="text/javascript" src="/static/processing/p5.js"></script>

<script language="javascript" type="text/javascript" src="/static/processing/p5.dom.js"></script>

<script language="javascript" type="text/javascript" src="/static/processing/vec_net.js"></script>

<p><a class="caption" href="/posts/geometric-ripples-p5js/"><span class="arrow"><i>'Ripples'</i>. Made in p5.js</span></a></p>
<p>Source code:</p>
<div class="codehilite"><pre><span></span><span class="kd">var</span> <span class="nx">funkyBoxes</span> <span class="o">=</span> <span class="p">[[]];</span>
<span class="kd">var</span> <span class="nx">ps</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">ox</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">oy</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">setup</span><span class="p">(){</span>

  <span class="c1">// Allows canvas to scale to screen size</span>
  <span class="kd">var</span> <span class="nx">prnt</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;p5-container&#39;</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">positionInfo</span> <span class="o">=</span> <span class="nx">prnt</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">();</span>
  <span class="nx">canvas</span> <span class="o">=</span> <span class="nx">createCanvas</span><span class="p">(</span><span class="nx">positionInfo</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="nx">positionInfo</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>
  <span class="nx">canvas</span><span class="p">.</span><span class="nx">parent</span><span class="p">(</span><span class="s1">&#39;p5-container&#39;</span><span class="p">);</span>
  <span class="c1">//</span>

  <span class="nx">ps</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span> <span class="c1">// element size</span>
  <span class="kd">var</span> <span class="nx">nx</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="nx">ps</span><span class="p">)</span> <span class="o">-</span> <span class="mi">2</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">ny</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">height</span><span class="o">/</span><span class="nx">ps</span><span class="p">)</span> <span class="o">-</span> <span class="mi">2</span><span class="p">;</span>
  <span class="nx">noiseDetail</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
  <span class="nx">colorMode</span><span class="p">(</span><span class="nx">HSB</span><span class="p">,</span> <span class="mi">360</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">nx</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">funkyBoxes</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">j</span><span class="o">&lt;</span><span class="nx">ny</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span>  <span class="p">{</span>
      <span class="nx">funkyBoxes</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FunkyBox</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="nx">ox</span> <span class="o">=</span> <span class="p">(</span><span class="nx">width</span> <span class="o">-</span> <span class="p">(</span><span class="nx">ps</span> <span class="o">*</span> <span class="nx">nx</span><span class="p">))</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
  <span class="nx">oy</span> <span class="o">=</span> <span class="p">(</span><span class="nx">height</span> <span class="o">-</span> <span class="p">(</span><span class="nx">ps</span> <span class="o">*</span> <span class="nx">ny</span><span class="p">))</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">draw</span><span class="p">()</span> <span class="p">{</span>

    <span class="nx">background</span><span class="p">(</span><span class="s1">&#39;#0B0E31&#39;</span><span class="p">);</span>

    <span class="nx">t</span> <span class="o">=</span> <span class="nx">millis</span><span class="p">()</span><span class="o">/</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">funkyBoxes</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>  <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">j</span><span class="o">&lt;</span><span class="nx">funkyBoxes</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span>  <span class="p">{</span>

        <span class="kd">var</span> <span class="nx">v</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="nx">t</span> <span class="o">+</span> <span class="nx">i</span> <span class="o">+</span> <span class="nx">j</span> <span class="o">+</span> <span class="mi">5</span> <span class="o">*</span> <span class="mi">2</span><span class="o">*</span><span class="nx">noise</span><span class="p">(</span><span class="nx">i</span><span class="o">/</span><span class="mi">5</span><span class="p">,</span><span class="nx">j</span><span class="o">/</span><span class="mi">5</span><span class="p">,</span><span class="nx">t</span><span class="o">/</span><span class="mi">5</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">st</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">+</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="nx">spacedSin</span><span class="p">(</span><span class="nx">v</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">op</span> <span class="o">=</span> <span class="mi">1</span><span class="o">-</span><span class="nx">st</span><span class="p">;</span>

        <span class="nx">push</span><span class="p">();</span>
        <span class="nx">translate</span><span class="p">(</span><span class="nx">i</span><span class="o">*</span><span class="nx">ps</span><span class="o">+</span><span class="nx">ox</span><span class="p">,</span> <span class="nx">j</span><span class="o">*</span><span class="nx">ps</span><span class="o">+</span><span class="nx">oy</span><span class="p">);</span>
        <span class="nx">c</span> <span class="o">=</span> <span class="nx">color</span><span class="p">(</span><span class="mi">360</span> <span class="o">*</span> <span class="nx">noise</span><span class="p">(</span><span class="nx">i</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span><span class="nx">j</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span><span class="nx">t</span><span class="p">),</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
        <span class="nx">funkyBoxes</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span><span class="p">].</span><span class="nx">draw</span><span class="p">(</span><span class="nx">st</span><span class="p">,</span> <span class="nx">c</span><span class="p">,</span> <span class="nx">op</span><span class="p">);</span>
        <span class="nx">pop</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">}</span>

<span class="p">}</span>

<span class="kd">function</span> <span class="nx">FunkyBox</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">draw</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">st</span><span class="p">,</span> <span class="nx">c</span><span class="p">,</span> <span class="nx">op</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="nx">stroke</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span>
    <span class="nx">fill</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
    <span class="kd">var</span> <span class="nx">t</span> <span class="o">=</span> <span class="o">-</span><span class="mi">8</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">ips</span> <span class="o">=</span> <span class="nx">ps</span><span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="nx">t</span><span class="p">;</span>
    <span class="nx">beginShape</span><span class="p">();</span>
    <span class="nx">vertex</span><span class="p">(</span><span class="nx">t</span><span class="o">+</span><span class="nx">st</span><span class="o">*</span><span class="nx">ips</span><span class="p">,</span> <span class="nx">t</span><span class="o">+</span><span class="nx">st</span><span class="o">*</span><span class="nx">ips</span><span class="p">);</span>
    <span class="nx">vertex</span><span class="p">(</span><span class="nx">ps</span><span class="o">-</span><span class="nx">t</span><span class="p">,</span> <span class="nx">t</span><span class="p">);</span>
    <span class="nx">vertex</span><span class="p">(</span><span class="nx">t</span><span class="o">+</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="nx">st</span><span class="p">)</span><span class="o">*</span><span class="nx">ips</span><span class="p">,</span> <span class="nx">t</span><span class="o">+</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="nx">st</span><span class="p">)</span><span class="o">*</span><span class="nx">ips</span><span class="p">);</span>
    <span class="nx">vertex</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span> <span class="nx">ps</span><span class="o">-</span><span class="nx">t</span><span class="p">);</span>
    <span class="nx">vertex</span><span class="p">(</span><span class="nx">t</span><span class="o">+</span><span class="nx">st</span><span class="o">*</span><span class="nx">ips</span><span class="p">,</span> <span class="nx">t</span><span class="o">+</span><span class="nx">st</span><span class="o">*</span><span class="nx">ips</span><span class="p">);</span>
    <span class="nx">endShape</span><span class="p">();</span>
    <span class="nx">stroke</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">ps</span> <span class="o">-</span> <span class="mi">15</span><span class="p">;</span>
    <span class="nx">ellipse</span><span class="p">(</span><span class="nx">ps</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="nx">ps</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">d</span><span class="p">);</span>
    <span class="nx">fill</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span>
    <span class="nx">ellipse</span><span class="p">(</span><span class="nx">ps</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="nx">ps</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="nx">d</span><span class="o">*</span><span class="nx">op</span><span class="p">,</span> <span class="nx">d</span><span class="o">*</span><span class="nx">op</span><span class="p">);</span>
  <span class="p">}</span>

<span class="p">}</span>

<span class="kd">function</span> <span class="nx">spacedSin</span><span class="p">(</span><span class="nx">x</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">xn</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">x</span> <span class="o">%</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">));</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">xn</span> <span class="o">&lt;</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="o">/</span><span class="mi">2</span><span class="p">){</span>
    <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">xn</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span> <span class="o">-</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<div class="techbox cf">
  <h2 class="techused">Post tags:</h3>
  <ul class="tags">
    
      
        <li>
    <span class="tag">
      <i class="fa fa-dot-circle-o fa-fw"
      style="color:#ed225d"
      aria-hidden="true"></i>
      Processing
    </span>
</li>
      
    
      
        <li>
    <span class="tag">
      <i class="fa fa-code fa-fw"
      style="color:#2bbe56"
      aria-hidden="true"></i>
      JavaScript
    </span>
</li>
      
    
      
        <li>
    <span class="tag">
      <i class="fa fa-superscript fa-fw"
      style="color:#f65a5b"
      aria-hidden="true"></i>
      Mathematics
    </span>
</li>
      
    
  </ul>
</div>


      </div>

    </div>
    <div id="footer-container">
      <div id="footer">
        
        <ul class="footer-ul">
          <li style="color: #8AB3CF; margin-bottom: 5px;">© Jack Brookes 2017</li>
          <li><a href="/">Home</a></li>
          <li><a href="/posts/">Posts</a></li>
          <li><a href="/about/">About</a></li>
          <li><a href="/contact/">Contact</a></li>
          <li><a onclick="topFunction()" style="cursor:pointer">Back to top <i class="fa fa-fw fa-chevron-up" aria-hidden="true"></i></a></li>
        </ul>
        
      </div>
    </div>

    <script>
    // When the user clicks on the button, scroll to the top of the document
    function topFunction() {
        document.body.scrollTop = 0;
        document.documentElement.scrollTop = 0;
    }
    </script>


  </body>
</html>